<!DOCTYPE html>
<html class="writer-html5" lang="fr">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>TD Fonctions et Procédures &mdash; Documentation SDWBDD23 0.1</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b20cc3f5" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=19f00094" />

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=68bd05ab"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=4825356b"></script>
        <script src="_static/translations.js?v=d99ca74e"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Recherche" href="search.html" />
    <link rel="next" title="Les triggers" href="triggers.html" />
    <link rel="prev" title="Fonctions et les Procédures SQL" href="functions_and_procedures.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            SDWBDD23
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Rechercher docs" aria-label="Rechercher docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Au menu:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Accueil</a></li>
<li class="toctree-l1"><a class="reference internal" href="disclaimer.html">Avant propos</a></li>
<li class="toctree-l1"><a class="reference internal" href="syntaxic_elements.html">Éléments syntaxiques cruciaux</a></li>
<li class="toctree-l1"><a class="reference internal" href="functions_and_procedures.html">Les fonctions et les procédures</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">TD sur les fonctions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#exercice-1-fonction-de-calcul-de-moyenne">Exercice 1 : Fonction de calcul de moyenne</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercice-2-procedure-d-insertion">Exercice 2 : Procédure d’insertion</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercice-3-fonction-de-conversion-de-devise">Exercice 3 : Fonction de conversion de devise</a></li>
<li class="toctree-l2"><a class="reference internal" href="#exercice-4-procedure-de-mise-a-jour-avec-historique">Exercice 4 : Procédure de mise à jour avec historique</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="triggers.html">Les triggers</a></li>
<li class="toctree-l1"><a class="reference internal" href="td_triggers.html">TD sur les triggers</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">SDWBDD23</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">TD Fonctions et Procédures</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/td_functions_and_procedures.rst.txt" rel="nofollow"> Afficher la source de la page</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="td-fonctions-et-procedures">
<h1>TD Fonctions et Procédures<a class="headerlink" href="#td-fonctions-et-procedures" title="Lien permanent vers cette rubrique"></a></h1>
<section id="exercice-1-fonction-de-calcul-de-moyenne">
<h2>Exercice 1 : Fonction de calcul de moyenne<a class="headerlink" href="#exercice-1-fonction-de-calcul-de-moyenne" title="Lien permanent vers cette rubrique"></a></h2>
<p>Créez une fonction appelée <code class="docutils literal notranslate"><span class="pre">compute_average</span></code> qui prend trois paramètres (notes) en entrée et renvoie la moyenne. Utilisez cette fonction pour calculer la moyenne de trois ensembles de notes différents.</p>
</section>
<section id="exercice-2-procedure-d-insertion">
<h2>Exercice 2 : Procédure d’insertion<a class="headerlink" href="#exercice-2-procedure-d-insertion" title="Lien permanent vers cette rubrique"></a></h2>
<p>En utilisant la table suivante :</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">client</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="n">email</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Créez une procédure appelée <code class="docutils literal notranslate"><span class="pre">insert_client</span></code> qui prend le nom et l’email d’un client en paramètres, insère une nouvelle entrée dans une table <code class="docutils literal notranslate"><span class="pre">client</span></code> avec un nouvel identifiant auto-incrémenté, et renvoie en paramètre <code class="docutils literal notranslate"><span class="pre">OUT</span></code> l’identifiant nouvellement généré.</p>
</section>
<section id="exercice-3-fonction-de-conversion-de-devise">
<h2>Exercice 3 : Fonction de conversion de devise<a class="headerlink" href="#exercice-3-fonction-de-conversion-de-devise" title="Lien permanent vers cette rubrique"></a></h2>
<p>Créez une fonction appelée <code class="docutils literal notranslate"><span class="pre">convert_dollars</span></code> qui prend un montant en dollars américains et un taux de change en paramètres, puis renvoie le montant converti dans une autre devise. Testez la fonction pour convertir plusieurs montants avec des taux de change différents.</p>
</section>
<section id="exercice-4-procedure-de-mise-a-jour-avec-historique">
<h2>Exercice 4 : Procédure de mise à jour avec historique<a class="headerlink" href="#exercice-4-procedure-de-mise-a-jour-avec-historique" title="Lien permanent vers cette rubrique"></a></h2>
<p>Avec le schéma suivant :</p>
<div class="highlight-sql notranslate"><div class="highlight"><pre><span></span><span class="c1">-- Table pour stocker les produits</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">product</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<span class="w">    </span><span class="n">name</span><span class="w"> </span><span class="nb">VARCHAR</span><span class="p">(</span><span class="mi">50</span><span class="p">),</span>
<span class="w">    </span><span class="n">quantity</span><span class="w"> </span><span class="nb">INT</span>
<span class="p">);</span>

<span class="c1">-- Table pour stocker l&#39;historique du stock</span>
<span class="k">CREATE</span><span class="w"> </span><span class="k">TABLE</span><span class="w"> </span><span class="n">stock_history</span><span class="w"> </span><span class="p">(</span>
<span class="w">    </span><span class="n">id</span><span class="w"> </span><span class="nb">INT</span><span class="w"> </span><span class="k">PRIMARY</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="n">AUTO_INCREMENT</span><span class="p">,</span>
<span class="w">    </span><span class="n">product_id</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span>
<span class="w">    </span><span class="n">quantity_before</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span>
<span class="w">    </span><span class="n">quantity_after</span><span class="w"> </span><span class="nb">INT</span><span class="p">,</span>
<span class="w">    </span><span class="n">updated_at</span><span class="w"> </span><span class="k">TIMESTAMP</span><span class="w"> </span><span class="k">DEFAULT</span><span class="w"> </span><span class="k">CURRENT_TIMESTAMP</span><span class="p">,</span>
<span class="w">    </span><span class="k">FOREIGN</span><span class="w"> </span><span class="k">KEY</span><span class="w"> </span><span class="p">(</span><span class="n">product_id</span><span class="p">)</span><span class="w"> </span><span class="k">REFERENCES</span><span class="w"> </span><span class="n">product</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
<span class="p">);</span>
</pre></div>
</div>
<p>Créez une procédure appelée <code class="docutils literal notranslate"><span class="pre">update_stock</span></code> qui prend l’ID d’un produit et la nouvelle quantité en paramètres. La procédure devrait mettre à jour la quantité disponible dans une table stock et ajouter une entrée dans une table <code class="docutils literal notranslate"><span class="pre">stock_history</span></code> avec l’ID du produit, la quantité avant la mise à jour, et la quantité après la mise à jour.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Pied de page">
        <a href="functions_and_procedures.html" class="btn btn-neutral float-left" title="Fonctions et les Procédures SQL" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Précédent</a>
        <a href="triggers.html" class="btn btn-neutral float-right" title="Les triggers" accesskey="n" rel="next">Suivant <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Droits d'auteur 2023, Thibault Truffert.</p>
  </div>

  Compilé avec <a href="https://www.sphinx-doc.org/">Sphinx</a> en utilisant un
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">thème</a>
    fourni par <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>